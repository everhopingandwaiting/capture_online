<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
            PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
            "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!-- TODO 使用<sql id="">,<include refid="">  重构 sql    ,llalla-->

<sqlMap namespace="Goods">

    <sql id="queryCondition">
        <dynamic prepend="WHERE">
            <isNotEmpty prepend="AND" property="category">
                category  LIKE '%$category$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="date">
                date  LIKE  '%$date$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="name">
                name  LIKE  '%$name$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="tag">
                tag  LIKE '%$tag$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="comment">
                comment  LIKE '%$comment$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="view">
                view  LIKE  '%$view$%'
            </isGreaterThan>
            <isNotEmpty prepend="AND" property="information">
                information  LIKE  '%$information$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="picture">
                picture  LIKE  '%$picture$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="type">
                type  LIKE  '%$type$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="price">
                price  LIKE  '%$price$%'
            </isGreaterThan>
        </dynamic>
    </sql>
    <select id="searchConditionGoodsList" parameterClass="cn.spring.goods.form.GoodsForm"
            resultClass="cn.spring.goods.form.GoodsForm">
        SELECT id, category, date, name, tag, comment,view,information,picture,type,price
        FROM goods_tab
        <dynamic prepend="WHERE">
            <isNotEmpty prepend="AND" property="category">
                category  LIKE '%$category$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="date">
                date  LIKE  '%$date$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="name">
                name  LIKE  '%$name$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="tag">
                tag  LIKE '%$tag$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="comment">
                comment  LIKE '%$comment$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="view">
                view  LIKE  '%$view$%'
            </isGreaterThan>
            <isNotEmpty prepend="AND" property="information">
                information  LIKE  '%$information$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="picture">
                picture  LIKE  '%$picture$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="type">
                type  LIKE  '%$type$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="price">
                price  LIKE  '%$price$%'
            </isGreaterThan>
        </dynamic>
        ORDER BY view DESC


    </select>
	<select id="searchGoodsList"  parameterClass="cn.spring.goods.form.GoodsForm"
            resultClass="cn.spring.goods.form.GoodsForm">
        SELECT id, category, date, name, tag, comment,view,information,picture,type,price
        FROM goods_tab
        <dynamic prepend="WHERE">
            <isNotEmpty prepend="AND" property="category">
                category  LIKE '%$category$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="date">
                date  LIKE  '%$date$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="name">
                name  LIKE  '%$name$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="tag">
                tag  LIKE '%$tag$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="comment">
                comment  LIKE '%$comment$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="view">
                view  LIKE  '%$view$%'
            </isGreaterThan>
            <isNotEmpty prepend="AND" property="information">
                information  LIKE  '%$information$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="picture">
                picture  LIKE  '%$picture$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="type">
                type  LIKE  '%$type$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="price">
                price  LIKE  '%$price$%'
            </isGreaterThan>
        </dynamic>
        ORDER BY view ASC

    </select>


	<select id="searchConditionGoodsListHot" parameterClass="cn.spring.goods.form.GoodsForm" resultClass="cn.spring.goods.form.GoodsForm">
		SELECT id, category, date, name, tag, comment,view,information,picture,type,price
		FROM goods_tab
        <dynamic prepend="WHERE">
            <isNotEmpty prepend="AND" property="category">
                category  LIKE '%$category$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="date">
                date  LIKE  '%$date$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="name">
                name  LIKE  '%$name$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="tag">
                tag  LIKE '%$tag$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="comment">
                comment  LIKE '%$comment$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="view">
                view  LIKE  '%$view$%'
            </isGreaterThan>
            <isNotEmpty prepend="AND" property="information">
                information  LIKE  '%$information$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="picture">
                picture  LIKE  '%$picture$%'
            </isNotEmpty>
            <isNotEmpty prepend="AND" property="type">
                type  LIKE  '%$type$%'
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="AND" property="price">
                price  LIKE  '%$price$%'
            </isGreaterThan>
        </dynamic>

        ORDER BY view DESC  LIMIT #limit#
	</select>
	<select id="searchGoodById" parameterClass="cn.spring.goods.form.GoodsForm" resultClass="cn.spring.goods.form.GoodsForm">
		SELECT id, category, date, name, tag, comment,view,information,picture,type ,price
		FROM goods_tab
		WHERE id = #id#
	</select>
	<insert id="insertGoods" parameterClass="cn.spring.goods.form.GoodsForm">
		 INSERT  INTO   goods_tab( category, date, name, tag, comment,view,information,picture,type,price)
		 VALUES   (#category#, #date#, #name#, #tag#, #comment#,#view#,#information#,#picture#,#price#,#type# )
	</insert>
    <update id="updateGoodsById" parameterClass="cn.spring.goods.form.GoodsForm" >
        UPDATE  goods_tab
        <dynamic prepend="set">
            <isNotEmpty prepend="," property="category">
                 category=#category#
            </isNotEmpty>
            <isNotEmpty prepend="," property="date">
                date=#date#
            </isNotEmpty>
            <isNotEmpty prepend="," property="category">
                name=#name#
            </isNotEmpty>
            <isNotEmpty prepend="," property="tag">
                tag=#tag#
            </isNotEmpty>
            <isNotEmpty prepend="," property="comment">
                comment=#comment#
            </isNotEmpty>
            <isNotEmpty prepend="," property="view">
                view=#view#
            </isNotEmpty>
            <isNotEmpty prepend="," property="information">
                information=#information#
            </isNotEmpty>
            <isNotEmpty prepend="," property="picture">
                picture=#picture#
            </isNotEmpty>
            <isNotEmpty prepend="," property="type">
                type=#type#
            </isNotEmpty>
            <isGreaterThan compareValue="0" prepend="," property="price">
                price=#price#
            </isGreaterThan>
        </dynamic>

        where id=#id#
    </update>
</sqlMap>